# ðŸ“Š Job Tracker Career AI - Database Schema Documentation

**Version:** 1.0  
**Date:** December 13, 2025  
**Database:** PostgreSQL 13.23  
**Database Name:** `job_tracker_prod`

---

## ðŸ“‘ Table of Contents

1. [Overview](#overview)
2. [Database Tables](#database-tables)
   - [career_events](#1-career_events)
   - [research_cache](#2-research_cache)
   - [applications](#3-applications)
   - [provider_usage](#4-provider_usage)
3. [Relationships & Data Flow](#relationships--data-flow)
4. [API Route Recommendations](#api-route-recommendations)
5. [Dashboard UI Components](#dashboard-ui-components)
6. [Data Visualization Opportunities](#data-visualization-opportunities)
7. [Query Examples](#query-examples)

---

## Overview

The Job Tracker Career AI platform uses 4 primary tables to manage job applications, research data, and system analytics:

- **career_events**: Main event storage (interviews, offers, applications, rejections)
- **research_cache**: Intelligent research cache with 5-level fallback system
- **applications**: Legacy/alternative application storage
- **provider_usage**: AI provider performance tracking

**Current Data Distribution:**
- Total Events: 11 (63.6% INTERVIEW, 27.3% OFFER, 9.1% APPLIED)
- Research Cache: Production-ready (self-learning enabled)

---

## Database Tables

### 1. career_events

**Purpose:** Primary storage for all career-related events (job applications, interviews, offers, rejections)

**Table Schema:**

| Column Name | Data Type | Nullable | Default | Description |
|-------------|-----------|----------|---------|-------------|
| `id` | INTEGER | NOT NULL | Auto-increment | Primary key (sequential) |
| `event_id` | VARCHAR | NOT NULL | - | Unique event identifier (e.g., `cls_19b13ecc78c161bc`) |
| `event_type` | VARCHAR | NOT NULL | - | Event classification: `APPLIED`, `INTERVIEW`, `OFFER`, `REJECTION` |
| `company` | VARCHAR | NOT NULL | - | Company name (e.g., "Google", "Microsoft") |
| `confidence` | DOUBLE PRECISION | YES | - | AI confidence score (0.0-1.0) for classification accuracy |
| `summary` | TEXT | YES | - | Human-readable event summary |
| `raw_data` | JSONB | YES | - | Complete event data including metadata, message_id, classified_at |
| `research_briefing` | TEXT | YES | - | Company research summary (generated by researcher service) |
| `created_at` | TIMESTAMP WITH TIMEZONE | YES | CURRENT_TIMESTAMP | Event creation timestamp |
| `updated_at` | TIMESTAMP WITH TIMEZONE | YES | - | Last modification timestamp |
| `research_metadata` | JSONB | YES | - | Research tracking (provider, match_type, cached, quality, response_time_ms) |

**Indexes:**
- `PRIMARY KEY`: `id`
- `UNIQUE`: `event_id`
- `idx_career_events_company`: Fast company lookups
- `idx_career_events_event_id`: Fast event ID lookups
- `idx_career_events_event_type`: Filter by event type (INTERVIEW/OFFER/etc)
- `idx_research_metadata`: GIN index for JSON queries

**raw_data JSON Structure:**
```json
{
  "event_id": "cls_19b13ecc78c161bc",
  "message_id": "19b13ecc78c161bc",
  "event_type": "INTERVIEW",
  "company": "Jayshree Infotech",
  "role": "Data Analyst",
  "confidence": 0.8,
  "classified_at": "2025-12-13T17:28:25.184845",
  "metadata": {
    "method": "ai",           // Classification method: "ai" | "keyword" | "fallback"
    "provider": "groq",       // AI provider: "groq" | "gemini" | null
    "snippet": "Dear Nikunj..."  // Email excerpt
  },
  "research_briefing": ""
}
```

**research_metadata JSON Structure:**
```json
{
  "provider": "tavily",              // Research provider: "tavily" | "google" | "cache"
  "match_type": "exact",             // Cache match: "exact" | "same_company" | "same_role" | "patterns" | "generic"
  "cached": true,                    // Whether from cache
  "quality": 0.95,                   // Research quality score (0.4-0.95)
  "response_time_ms": 450            // Research response time
}
```

**Event Type Distribution:**
- `INTERVIEW`: 63.6% - Interview invitations, scheduling
- `OFFER`: 27.3% - Job offers received
- `APPLIED`: 9.1% - Application confirmations
- `REJECTION`: 0% (current) - Rejection notifications

**Key Insights for UI:**
- Use `event_type` for color coding and status badges
- Display `confidence` as quality indicator (0.8+ = high confidence)
- Show `company` with logo/icon
- Parse `raw_data.role` for job title
- Display `research_briefing` in expandable cards
- Use `created_at` for timeline visualization

---

### 2. research_cache

**Purpose:** Self-learning research cache with 5-level intelligent fallback system

**Table Schema:**

| Column Name | Data Type | Nullable | Default | Description |
|-------------|-----------|----------|---------|-------------|
| `id` | INTEGER | NOT NULL | Auto-increment | Primary key |
| `company` | VARCHAR(255) | NOT NULL | - | Original company name (case-sensitive) |
| `role` | VARCHAR(255) | YES | - | Job role/position |
| `description` | TEXT | YES | - | Company description and research summary |
| `salary_range` | VARCHAR(100) | YES | - | Salary information (if available) |
| `industry` | VARCHAR(100) | YES | - | Company industry (e.g., "Technology", "Finance") |
| `company_size` | VARCHAR(50) | YES | - | Company size (e.g., "1000-5000", "Startup") |
| `data_source` | VARCHAR(50) | YES | - | Research source: `tavily`, `google`, `duckduckgo` |
| `research_quality` | DOUBLE PRECISION | YES | - | Quality score (0.4-0.95 based on match type) |
| `researched_at` | TIMESTAMP | YES | NOW() | When research was cached |
| `company_normalized` | VARCHAR(255) | YES | - | Lowercase, alphanumeric-only for matching |
| `role_normalized` | VARCHAR(255) | YES | - | Lowercase, alphanumeric-only for matching |

**Indexes:**
- `PRIMARY KEY`: `id`
- `UNIQUE`: `(company_normalized, role_normalized)` - Prevent duplicates
- `idx_company_normalized`: Fast company lookups
- `idx_role_normalized`: Fast role lookups
- `idx_researched_at`: Sort by freshness (DESC)

**Cache Fallback Levels:**
1. **Level 1 - Exact Match** (95% quality): Same company + role
2. **Level 2 - Same Company** (85% quality): Same company, different role
3. **Level 3 - Same Role** (75% quality): Different companies, same role
4. **Level 4 - Industry Patterns** (60% quality): Similar industry/company size
5. **Level 5 - Generic Template** (40% quality): Always available fallback

**Key Insights for UI:**
- Display cache statistics: total cached, unique companies, unique roles
- Show `research_quality` as trust indicator
- Visualize `data_source` distribution (Tavily vs Google vs DuckDuckGo)
- Display `researched_at` to show cache freshness
- Show cache hit rate over time
- Create admin panel to view/edit cache entries

---

### 3. applications

**Purpose:** Alternative/legacy application storage (may be used by older services)

**Table Schema:**

| Column Name | Data Type | Nullable | Default | Description |
|-------------|-----------|----------|---------|-------------|
| `id` | VARCHAR | NOT NULL | - | Primary key (string-based ID) |
| `company` | VARCHAR | YES | - | Company name |
| `role` | VARCHAR | YES | - | Job role/position |
| `status` | VARCHAR | YES | - | Application status |
| `confidence` | DOUBLE PRECISION | YES | - | Classification confidence |
| `summary` | TEXT | YES | - | Event summary |
| `research_briefing` | JSON | YES | - | Research data (JSON format, not JSONB) |
| `metadata` | JSON | YES | - | Additional metadata |
| `created_at` | TIMESTAMP | YES | - | Creation timestamp |
| `updated_at` | TIMESTAMP | YES | - | Update timestamp |
| `storage_path` | VARCHAR | YES | - | File storage path (MinIO/S3) |

**Indexes:**
- `PRIMARY KEY`: `id`
- `ix_applications_company`: Company lookups

**Note:** This table appears to be legacy. Consider migrating data to `career_events` for consistency.

**Key Insights for UI:**
- Check if this table is actively used
- If used, create migration tool to sync with `career_events`
- Display `storage_path` to access stored documents/emails

---

### 4. provider_usage

**Purpose:** Track AI provider performance, usage, and errors for analytics

**Table Schema:**

| Column Name | Data Type | Nullable | Default | Description |
|-------------|-----------|----------|---------|-------------|
| `id` | INTEGER | NOT NULL | Auto-increment | Primary key |
| `provider_name` | VARCHAR(50) | NOT NULL | - | Provider: `groq`, `gemini`, `tavily`, `google`, `duckduckgo` |
| `request_timestamp` | TIMESTAMP | NOT NULL | NOW() | When request was made |
| `success` | BOOLEAN | YES | TRUE | Whether request succeeded |
| `response_time_ms` | INTEGER | YES | - | Response time in milliseconds |
| `error_message` | TEXT | YES | - | Error details if failed |
| `created_at` | TIMESTAMP | YES | NOW() | Record creation time |

**Indexes:**
- `PRIMARY KEY`: `id`
- `idx_provider_timestamp`: `(provider_name, request_timestamp DESC)` - Fast time-series queries

**Providers Tracked:**
- **Classification**: `groq`, `gemini`
- **Research**: `tavily`, `google`, `duckduckgo`

**Key Insights for UI:**
- Create provider performance dashboard
- Show success rate per provider (success rate %)
- Display average response time by provider
- Visualize error trends over time
- Show daily quota usage vs limits
- Create alerts for high error rates

---

## Relationships & Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gmail Inbox    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ingestion     â”‚ â”€â”€â”€â–º Polls every 60s
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ (Kafka: raw_inbox_stream)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Classifier    â”‚ â”€â”€â”€â–º AI/Keyword classification
â”‚                 â”‚ â”€â”€â”€â–º Writes to provider_usage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ (Kafka: classified_events)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  career_events  â”‚ â—„â”€â”€â”€ Primary storage
â”‚   (INSERT)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ (If INTERVIEW or OFFER)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Researcher    â”‚ â”€â”€â”€â–º Check research_cache first
â”‚                 â”‚ â”€â”€â”€â–º Use API if cache miss
â”‚                 â”‚ â”€â”€â”€â–º Save to cache if API success
â”‚                 â”‚ â”€â”€â”€â–º Write to provider_usage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ research_cache  â”‚ â—„â”€â”€â”€ Self-learning storage
â”‚   (INSERT/      â”‚
â”‚    UPDATE)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ career_events   â”‚ â—„â”€â”€â”€ UPDATE research_briefing
â”‚   (UPDATE)      â”‚      + research_metadata
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ (Kafka: notifications)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Notifier     â”‚ â”€â”€â”€â–º WhatsApp notification
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      (Rate limited: 50/day)
```

**Key Data Flows:**
1. Email â†’ Ingestion â†’ Kafka â†’ Classifier â†’ career_events
2. INTERVIEW/OFFER â†’ Researcher â†’ research_cache â†’ career_events (UPDATE)
3. All AI calls â†’ provider_usage (performance tracking)

---

## API Route Recommendations

### Authentication
- `POST /api/auth/login` - User authentication
- `POST /api/auth/logout` - Logout
- `GET /api/auth/me` - Current user info

### Events API
```
GET    /api/events                    # List all events (paginated)
GET    /api/events/:id                # Get single event details
GET    /api/events/stats              # Event statistics (counts by type)
GET    /api/events/timeline           # Timeline data for visualization
GET    /api/events/search             # Search events (query params)
DELETE /api/events/:id                # Delete event (admin)
PATCH  /api/events/:id                # Update event metadata

Query Parameters for /api/events:
- page (default: 1)
- limit (default: 20)
- event_type (filter: APPLIED|INTERVIEW|OFFER|REJECTION)
- company (filter by company name)
- date_from (ISO date)
- date_to (ISO date)
- min_confidence (float 0-1)
- has_research (boolean)
- sort_by (created_at|confidence|company)
- sort_order (asc|desc)
```

### Research Cache API
```
GET    /api/research                  # List cached research (paginated)
GET    /api/research/:id              # Get single research entry
GET    /api/research/stats            # Cache statistics
GET    /api/research/companies        # List unique companies
GET    /api/research/roles            # List unique roles
GET    /api/research/search           # Search cache
POST   /api/research                  # Manually add research (admin)
DELETE /api/research/:id              # Delete cache entry (admin)

Query Parameters for /api/research:
- page (default: 1)
- limit (default: 20)
- company (filter)
- role (filter)
- data_source (tavily|google|duckduckgo)
- min_quality (float 0-1)
- date_from (ISO date)
- date_to (ISO date)
```

### Analytics API
```
GET    /api/analytics/overview        # Dashboard overview stats
GET    /api/analytics/providers       # Provider performance
GET    /api/analytics/trends          # Time-series trends
GET    /api/analytics/cache-performance  # Cache hit rates
GET    /api/analytics/events-by-type  # Event distribution
GET    /api/analytics/events-by-company  # Top companies
GET    /api/analytics/response-times  # Average response times

Response for /api/analytics/overview:
{
  "total_events": 11,
  "by_type": {
    "INTERVIEW": 7,
    "OFFER": 3,
    "APPLIED": 1,
    "REJECTION": 0
  },
  "this_week": 11,
  "this_month": 11,
  "cache_stats": {
    "total_cached": 3,
    "unique_companies": 3,
    "cache_hit_rate": 0.0
  },
  "top_companies": [
    {"company": "Jayshree Infotech", "count": 1},
    {"company": "Microsoft", "count": 1}
  ]
}
```

### Provider Usage API
```
GET    /api/providers                 # List all providers
GET    /api/providers/:name           # Single provider stats
GET    /api/providers/:name/usage     # Usage history
GET    /api/providers/comparison      # Compare providers

Response for /api/providers:
[
  {
    "name": "groq",
    "type": "classifier",
    "total_requests": 150,
    "success_rate": 0.95,
    "avg_response_time": 450,
    "daily_limit": 14400,
    "used_today": 45
  },
  {
    "name": "tavily",
    "type": "researcher",
    "total_requests": 33,
    "success_rate": 1.0,
    "avg_response_time": 520,
    "daily_limit": 33,
    "used_today": 33
  }
]
```

### Health & System
```
GET    /api/health                    # System health check
GET    /api/health/services           # Service status
GET    /api/health/kafka              # Kafka queue status
GET    /api/health/database           # Database connection
```

---

## Dashboard UI Components

### 1. **Dashboard Home** (`/dashboard`)

**Key Metrics Cards:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Total Applications â”‚  â”‚  This Week          â”‚  â”‚  Success Rate       â”‚
â”‚        11           â”‚  â”‚       11            â”‚  â”‚      27.3%          â”‚
â”‚  â–² +11 from last    â”‚  â”‚  â–² +11 from last    â”‚  â”‚  (3 offers / 11)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Interviews         â”‚  â”‚  Offers             â”‚  â”‚  Cache Hit Rate     â”‚
â”‚        7            â”‚  â”‚       3             â”‚  â”‚      0%             â”‚
â”‚  63.6% of total     â”‚  â”‚  27.3% of total     â”‚  â”‚  (Just started)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charts:**
1. **Event Timeline** (Line/Area chart)
   - X-axis: Date
   - Y-axis: Number of events
   - Color-coded by event_type
   - Source: `GET /api/events/timeline`

2. **Event Distribution** (Donut/Pie chart)
   - Segments: APPLIED, INTERVIEW, OFFER, REJECTION
   - Show percentages
   - Source: `GET /api/analytics/events-by-type`

3. **Top Companies** (Bar chart)
   - X-axis: Company names
   - Y-axis: Number of applications
   - Source: `GET /api/analytics/events-by-company`

**Recent Activity Feed:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Recent Events                                    View All â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸŽ¯ INTERVIEW - Google - Senior Software Engineer          â”‚
â”‚     Confidence: 95% â€¢ 2 hours ago                          â”‚
â”‚     [View Details] [Research]                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸŽ‰ OFFER - Microsoft - Staff Engineer                     â”‚
â”‚     Confidence: 98% â€¢ 5 hours ago                          â”‚
â”‚     [View Details] [Research]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. **Events List** (`/events`)

**Features:**
- Sortable table with columns: Event Type, Company, Role, Confidence, Date, Actions
- Filters: Event type, Date range, Company, Min confidence
- Search bar (company/role)
- Pagination (20 per page)
- Bulk actions (delete, export)

**Table Columns:**
| Status | Company | Role | Confidence | Created | Research | Actions |
|--------|---------|------|------------|---------|----------|---------|
| ðŸŽ¯ INTERVIEW | Google | SWE | â—â—â—â—â—‹ 85% | 2h ago | âœ… | ðŸ‘ï¸ âœï¸ ðŸ—‘ï¸ |
| ðŸŽ‰ OFFER | Microsoft | Staff | â—â—â—â—â— 98% | 5h ago | âœ… | ðŸ‘ï¸ âœï¸ ðŸ—‘ï¸ |

**Status Icons:**
- ðŸŽ¯ INTERVIEW (Blue)
- ðŸŽ‰ OFFER (Green)
- ðŸ“ APPLIED (Yellow)
- âŒ REJECTION (Red)

### 3. **Event Details** (`/events/:id`)

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Events                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸŽ¯ INTERVIEW                                              â”‚
â”‚  Google - Senior Software Engineer                         â”‚
â”‚                                                            â”‚
â”‚  Confidence: â—â—â—â—â—‹ 85%                                    â”‚
â”‚  Classified: AI (Groq) â€¢ 2 hours ago                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ“§ Email Details                                          â”‚
â”‚  Message ID: 19b13ecc78c161bc                             â”‚
â”‚  Received: Dec 13, 2025 5:28 PM                           â”‚
â”‚                                                            â”‚
â”‚  Snippet: "Dear Nikunj, Thank you for your interest..."   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ”¬ Company Research                                       â”‚
â”‚  Source: Tavily â€¢ Quality: 95%                            â”‚
â”‚  Response Time: 450ms â€¢ Cached: Yes                       â”‚
â”‚                                                            â”‚
â”‚  [Full research briefing text here...]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ“Š Metadata                                               â”‚
â”‚  Event ID: cls_19b13ecc78c161bc                           â”‚
â”‚  Classification Method: ai                                 â”‚
â”‚  Provider: groq                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. **Research Cache** (`/research`)

**Features:**
- View all cached research
- Filter by company, role, data source, quality
- Search functionality
- Show cache statistics
- Admin: Add/edit/delete entries

**Cache Statistics Panel:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Total Cached       â”‚  â”‚  Unique Companies   â”‚  â”‚  Unique Roles       â”‚
â”‚        3            â”‚  â”‚       3             â”‚  â”‚       3             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Sources                                             â”‚
â”‚  Tavily: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (3)                        â”‚
â”‚  Google: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0% (0)                          â”‚
â”‚  DuckDuckGo: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0% (0)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Average Quality: 95%                                     â”‚
â”‚  Cache Hit Rate: 0% (building...)                        â”‚
â”‚  Expected Savings: 30-70% after 1 week                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cache Table:**
| Company | Role | Quality | Source | Cached At | Actions |
|---------|------|---------|--------|-----------|---------|
| Google | SWE | â—â—â—â—â— 95% | Tavily | 2h ago | ðŸ‘ï¸ âœï¸ ðŸ—‘ï¸ |
| Microsoft | Staff | â—â—â—â—â— 95% | Tavily | 5h ago | ðŸ‘ï¸ âœï¸ ðŸ—‘ï¸ |

### 5. **Analytics Dashboard** (`/analytics`)

**Provider Performance:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Provider Performance                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Groq (Classifier)                                         â”‚
â”‚  Success Rate: 95% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 150/158               â”‚
â”‚  Avg Response: 450ms                                       â”‚
â”‚  Daily Quota: 45/14,400 used                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tavily (Researcher)                                       â”‚
â”‚  Success Rate: 100% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 33/33                â”‚
â”‚  Avg Response: 520ms                                       â”‚
â”‚  Daily Quota: 33/33 used âš ï¸ EXHAUSTED                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Charts:**
1. **Response Time Trends** (Line chart)
   - Compare providers over time
   - Source: `GET /api/providers/:name/usage`

2. **Success Rate Over Time** (Area chart)
   - Track reliability
   - Source: `GET /api/providers/:name/usage`

3. **Daily Quota Usage** (Stacked bar)
   - Show quota consumption
   - Alerts for near-limit

### 6. **Timeline View** (`/timeline`)

**Visual Timeline:**
```
Today â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  2h ago    ðŸŽ¯ INTERVIEW - Google
            Senior Software Engineer
            
  5h ago    ðŸŽ‰ OFFER - Microsoft
            Staff Engineer
            
  8h ago    ðŸ“ APPLIED - Amazon
            Principal Engineer

Yesterday â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1d ago    ðŸŽ¯ INTERVIEW - Stripe
            Backend Engineer
```

---

## Data Visualization Opportunities

### 1. **Application Funnel**
```
Applied (1)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Interview (7)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Offer (3)
   9.1%                        63.6%                       27.3%
            36% conversion               42.9% conversion
```

### 2. **Weekly Activity Heatmap**
```
         Mon  Tue  Wed  Thu  Fri  Sat  Sun
Week 1   ðŸŸ¢   ðŸŸ¢   ðŸŸ¡   ðŸ”´   ðŸŸ¢   âšª   âšª
Week 2   ðŸŸ¢   ðŸŸ¢   ðŸŸ¢   ðŸŸ¢   ðŸŸ¡   âšª   âšª

ðŸŸ¢ High activity (3+ events)
ðŸŸ¡ Medium (1-2 events)
ðŸ”´ Low (0 events)
âšª No data
```

### 3. **Confidence Distribution**
```
High (0.8-1.0)    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 80%
Medium (0.6-0.8)  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 15%
Low (0.0-0.6)     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 5%
```

### 4. **Company Ranking**
```
Most Applications:
1. Google         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 7 events
2. Microsoft      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 5 events
3. Amazon         â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 3 events
```

### 5. **Research Cache Performance**
```
Cache Hits vs API Calls (30 days)

     â”‚
100  â”‚                                    â•±â”€â”€
     â”‚                              â•±â”€â”€â”€â”€â•±
 75  â”‚                        â•±â”€â”€â”€â”€â•±
     â”‚                  â•±â”€â”€â”€â”€â•±
 50  â”‚            â•±â”€â”€â”€â”€â•±                  â”€â”€â”€ Cache Hits
     â”‚      â•±â”€â”€â”€â”€â•±                        â”€â”€â”€ API Calls
 25  â”‚ â•±â”€â”€â”€â•±
     â”‚â•±
  0  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Day 1                            Day 30
```

---

## Query Examples

### 1. Get Recent Events with Research
```sql
SELECT 
  e.id,
  e.event_type,
  e.company,
  e.raw_data->>'role' as role,
  e.confidence,
  e.created_at,
  e.research_briefing,
  e.research_metadata->>'provider' as research_provider,
  e.research_metadata->>'quality' as research_quality
FROM career_events e
WHERE e.research_briefing IS NOT NULL
ORDER BY e.created_at DESC
LIMIT 10;
```

### 2. Event Statistics by Type
```sql
SELECT 
  event_type,
  COUNT(*) as count,
  ROUND(AVG(confidence)::numeric, 2) as avg_confidence,
  ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER (), 1) as percentage
FROM career_events
GROUP BY event_type
ORDER BY count DESC;
```

### 3. Top Companies
```sql
SELECT 
  company,
  COUNT(*) as total_applications,
  COUNT(CASE WHEN event_type = 'INTERVIEW' THEN 1 END) as interviews,
  COUNT(CASE WHEN event_type = 'OFFER' THEN 1 END) as offers,
  ROUND(
    COUNT(CASE WHEN event_type = 'OFFER' THEN 1 END)::numeric / 
    COUNT(*)::numeric * 100, 
    1
  ) as offer_rate
FROM career_events
GROUP BY company
ORDER BY total_applications DESC
LIMIT 10;
```

### 4. Research Cache Hit Rate
```sql
SELECT 
  COUNT(CASE WHEN research_metadata->>'cached' = 'true' THEN 1 END)::float / 
  COUNT(*)::float * 100 as cache_hit_rate,
  COUNT(CASE WHEN research_metadata->>'cached' = 'true' THEN 1 END) as cache_hits,
  COUNT(*) as total_researches
FROM career_events
WHERE research_metadata IS NOT NULL;
```

### 5. Provider Performance
```sql
SELECT 
  provider_name,
  COUNT(*) as total_requests,
  ROUND(AVG(CASE WHEN success THEN 1 ELSE 0 END)::numeric * 100, 1) as success_rate,
  ROUND(AVG(response_time_ms)::numeric) as avg_response_ms,
  COUNT(CASE WHEN NOT success THEN 1 END) as failures
FROM provider_usage
WHERE request_timestamp >= NOW() - INTERVAL '7 days'
GROUP BY provider_name
ORDER BY total_requests DESC;
```

### 6. Daily Event Timeline
```sql
SELECT 
  DATE(created_at) as date,
  event_type,
  COUNT(*) as count
FROM career_events
WHERE created_at >= NOW() - INTERVAL '30 days'
GROUP BY DATE(created_at), event_type
ORDER BY date DESC, event_type;
```

### 7. Research Cache by Data Source
```sql
SELECT 
  data_source,
  COUNT(*) as total_cached,
  ROUND(AVG(research_quality)::numeric * 100, 1) as avg_quality,
  MIN(researched_at) as oldest_entry,
  MAX(researched_at) as newest_entry
FROM research_cache
GROUP BY data_source
ORDER BY total_cached DESC;
```

### 8. Events Without Research
```sql
SELECT 
  e.id,
  e.event_type,
  e.company,
  e.raw_data->>'role' as role,
  e.created_at
FROM career_events e
WHERE e.event_type IN ('INTERVIEW', 'OFFER')
  AND (e.research_briefing IS NULL OR e.research_briefing = '')
ORDER BY e.created_at DESC;
```

---

## Additional Recommendations

### 1. **New UI Features to Implement**

**Event Cards with Rich Data:**
- Company logo/favicon
- Role title with icon
- Confidence meter (visual bar)
- Research badge (âœ… if available)
- Action buttons (View, Edit, Delete)
- Tags (URGENT, REMOTE, HIGH_PAY)

**Filters & Search:**
- Multi-select event types
- Date range picker
- Confidence slider
- Company autocomplete
- Role search
- "Has Research" toggle

**Export Functionality:**
- Export to CSV/Excel
- Export to PDF report
- Share event details
- Copy to clipboard

### 2. **Real-time Updates**

Implement WebSocket for live updates:
- New event notifications
- Research completion alerts
- Provider status changes
- Cache hit celebrations

### 3. **Mobile Responsive**

Priority views:
- Dashboard (key metrics)
- Recent events (card view)
- Event details (full screen)
- Quick filters (drawer)

### 4. **Accessibility**

- ARIA labels for all interactive elements
- Keyboard navigation support
- Screen reader compatibility
- High contrast mode
- Color-blind friendly status colors

### 5. **Performance Optimization**

- Pagination (20-50 items per page)
- Lazy loading for large lists
- Virtual scrolling for timeline
- Debounced search
- Cached API responses

---

**Last Updated:** December 13, 2025  
**Next Review:** After implementing new dashboard features

For questions or updates, refer to the [API Health Check Report](/tmp/api_status_report.md)
